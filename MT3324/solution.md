# 解题思路与算法

## 思路
设目标中位数为 `x`，如果能在预算内买到 `m` 个甜品，并且其中至少有 `(m+1)//2` 个甜品甜度 `>= x`，则可认为 `x` 可行。

于是可以对答案（二分甜度）做可行性检查。

## 可行性检查 `can_reach(x)`
1. 将甜品按甜度是否 `>= x` 分成两组：
   - `high`：甜度 `>= x`，记录价格
   - `low`：甜度 `< x`，记录价格
2. 令 `need = (m+1)//2`。
   - 若 `len(high) < need`，直接不可行。
3. 必须先从 `high` 里选出 `need` 个最便宜的（保证中位数条件，且代价最小）。
4. 剩余 `m-need` 个，从 `low` 与 `high` 的剩余元素中取全局最便宜的若干个。
5. 若总花费 `<= v`，则可行。

## 正确性要点（简述）
- 为满足中位数不小于 `x`，至少要选 `need` 个 `high`；选更贵的 `high` 不会更优，所以必须选其中最便宜的 `need` 个。
- 在满足上述硬约束后，剩余名额只影响总价，因此选剩余候选中的最便宜者最优。
- 可行性关于 `x` 单调：`x` 越大条件越严格，因此可二分最大可行 `x`。

## 复杂度
- 设二分次数为 `O(log n)`，每次检查需要排序分组价格，复杂度约 `O(n log n)`。
- 总复杂度约 `O(n log n log n)`。
- 在 `n <= 1e5` 范围内可通过。

## 参考实现
见同目录 `solition.py`。
